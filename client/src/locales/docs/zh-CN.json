{
  "toc": "文档目录",
  "sectionTitles": {
    "overview": "概述",
    "getting-started": "快速开始",
    "getting-started-standalone": "直接启动",
    "getting-started-docker": "Docker 启动",
    "getting-started-kubernetes": "Kubernetes 启动",
    "web-usage": "Web 端使用",
    "cli-tool": "CLI 工具",
    "publish-skill": "发布技能",
    "deployment": "部署指南",
    "api-reference": "API 参考",
    "best-practices": "最佳实践",
    "faq": "常见问题",
    "appendix": "附录"
  },
  "content": {
    "overview": "# 概述\n\nBotSkill 是一个开放的 AI 技能市场，让开发者能够轻松发现、分享和集成各种智能技能。\n\n## 什么是 BotSkill？\n\nBotSkill 为 AI 代理、智能助手等应用提供可复用的技能模块。无论是数据处理、自然语言处理、API 集成还是其他功能，都可以在技能库中找到或发布。\n\n## 核心概念\n\n- **技能 (Skill)**：可重用的功能模块，通过 SKILL.md 定义元数据与文档\n- **版本 (Version)**：技能的不同版本，支持语义化版本 (X.Y.Z)\n- **发布者 (Publisher)**：技能的创建者和维护者\n- **使用者**：浏览、下载、集成技能的开发者\n\n## 功能特性\n\n| Web 端 | CLI 与 API |\n|--------|------------|\n| 技能浏览、搜索、筛选 | skm 命令行工具 |\n| 多语言、明暗主题 | RESTful API |\n| 用户认证、个人资料 | JWT 认证 |\n| 收藏、发布、数据统计 | 角色权限控制 |\n| 管理员后台 | |",
    "getting-started": "# 快速开始\n\n欢迎使用 BotSkill！这是一个为开发者提供的智能技能分享平台。本指南帮助您在 5 分钟内上手。\n\n## 5 分钟上手\n\n1. **注册账户**：点击右上角「注册」，填写用户名、邮箱、密码，完成注册后自动登录\n2. **浏览技能**：进入「技能库」，可按分类（AI、数据、Web 等）或关键词搜索\n3. **下载技能**：点击技能卡片进入详情页，复制安装命令 `skm get 技能名` 或点击下载按钮\n4. **安装 CLI**（可选）：`npm install -g @botskill/cli`，使用 `skm get 技能名` 下载到本地\n5. **发布技能**（需发布者角色）：在「个人资料 → 我的技能」点击「发布技能」，上传 SKILL.md 或压缩包\n\n## 注册与登录\n\n注册需提供：用户名（3–30 字符）、邮箱、密码（至少 8 字符，含大小写和数字）。登录支持邮箱或用户名 + 密码。登录后 Token 默认 7 天有效，支持刷新 Token 保持会话。\n\n## 核心概念\n\n- **技能 (Skill)**：可重用的功能模块，通过 SKILL.md 定义元数据与文档\n- **版本 (Version)**：技能的不同版本，支持语义化版本 X.Y.Z\n- **发布者 (Publisher)**：技能的创建者和维护者\n- **使用者**：浏览、下载、集成技能的开发者\n\n## 角色说明\n\n- **用户 (user)**：浏览、下载、收藏技能\n- **发布者 (publisher)**：可发布和管理自己的技能\n- **管理员 (admin)**：完整管理权限，可审核技能、管理用户与系统设置\n\n> 如何成为发布者：联系管理员将您的角色升级为 publisher，或使用 admin 账户在后台分配角色。\n\n## 安装方式\n\nBotSkill 支持多种安装方式，请根据您的环境选择：\n\n- **[直接启动](#getting-started-standalone)**：适合本地开发和测试\n- **[Docker 启动](#getting-started-docker)**：推荐用于生产环境，简单快速\n- **[Kubernetes 启动](#getting-started-kubernetes)**：适合容器编排和云原生部署",
    "getting-started-standalone": "# 直接启动\n\n这是最基础的安装方式，适合本地开发和测试环境。\n\n## 系统要求\n\n- Node.js 16.x 或更高版本\n- npm 或 yarn 包管理器\n- MongoDB (本地或云端实例)\n\n## 安装步骤\n\n### 1. 克隆项目\n\n```bash\ngit clone https://github.com/botskill-ai/botskill\ncd botskill/skills-project\n```\n\n### 2. 安装依赖\n\n```bash\n# 安装根目录依赖及前后端所有依赖\nnpm run install:all\n```\n\n或者分别安装：\n\n```bash\n# 根目录\nnpm install\n\n# 前端\ncd client && npm install && cd ..\n\n# 后端\ncd backend && npm install && cd ..\n```\n\n### 3. 配置环境变量\n\n在 `backend/.env` 文件中配置：\n\n```env\nNODE_ENV=development\nPORT=3001\nMONGODB_URI=mongodb://localhost:27017/botskill\nJWT_SECRET=your-super-secret-jwt-key-for-botskill\nJWT_EXPIRES_IN=7d\n\n# OAuth 配置（可选，如需使用 Google/GitHub 登录）\nGOOGLE_CLIENT_ID=your-google-client-id\nGOOGLE_CLIENT_SECRET=your-google-client-secret\nGOOGLE_CALLBACK_URL=http://localhost:3001/api/auth/google/callback\n\nGITHUB_CLIENT_ID=your-github-client-id\nGITHUB_CLIENT_SECRET=your-github-client-secret\nGITHUB_CALLBACK_URL=http://localhost:3001/api/auth/github/callback\n\nFRONTEND_URL=http://localhost:5173\nBACKEND_URL=http://localhost:3001\n```\n\n> **注意**：OAuth 配置是可选的。如果不配置，Google 和 GitHub 登录按钮将不会显示或会显示错误。\n\n### 4. 启动应用\n\n#### 开发模式（推荐）\n\n```bash\n# 并行启动前后端\nnpm run dev\n```\n\n前端将在 `http://localhost:5173` 上运行\n后端API将在 `http://localhost:3001` 上运行\n\n#### 单独启动\n\n```bash\n# 仅启动前端\nnpm run dev:client\n\n# 仅启动后端\nnpm run dev:server\n```\n\n### 5. 初始化数据\n\n```bash\n# 创建管理员账户\ncd backend\nnode scripts/create-admin.js\n\n# 初始化权限与角色\nnode scripts/seed-permissions-roles.js\n\n# 初始化分类\nnode scripts/init-categories.js\n```\n\n### 6. 验证安装\n\n打开浏览器访问 `http://localhost:5173`，您应该能看到 BotSkill 首页。\n\n## 故障排除\n\n### 端口被占用\n\n- 检查 `PORT` 环境变量\n- 确保没有其他服务使用相同端口\n\n### 数据库连接失败\n\n- 检查 `MONGODB_URI` 是否正确\n- 确保 MongoDB 服务正在运行\n- 检查防火墙设置\n\n### 依赖安装失败\n\n- 清除 npm 缓存: `npm cache clean --force`\n- 删除 node_modules 并重新安装",
    "getting-started-docker": "# Docker 启动\n\n使用 Docker 可以快速部署 BotSkill，无需手动配置 Node.js 和 MongoDB 环境。\n\n## 系统要求\n\n- Docker 20.10+ 和 Docker Compose 2.0+\n- 至少 2GB 可用内存\n- 至少 5GB 可用磁盘空间\n\n## 快速开始\n\n### 1. 克隆项目\n\n```bash\ngit clone https://github.com/botskill-ai/botskill\ncd botskill/skills-project\n```\n\n### 2. 配置环境变量\n\n创建 `.env` 文件（可选，用于自定义配置）：\n\n```env\nNODE_ENV=production\nMONGODB_URI=mongodb://mongo:27017/botskill\nJWT_SECRET=your-super-secret-jwt-key-at-least-32-chars\nPORT=3000\n```\n\n> **重要**：生产环境请务必修改 `JWT_SECRET` 为强随机字符串，可使用 `openssl rand -base64 32` 生成。\n\n### 3. 启动服务\n\n```bash\n# 使用 docker-compose 启动（包含 MongoDB）\ndocker-compose up -d\n```\n\n这将启动以下服务：\n\n- **app**: BotSkill 应用（前端 + 后端）\n- **mongo**: MongoDB 数据库\n\n### 4. 初始化数据\n\n```bash\n# 创建管理员账户\ndocker-compose exec app node scripts/create-admin.js\n\n# 初始化权限与角色\ndocker-compose exec app node scripts/seed-permissions-roles.js\n\n# 初始化分类\ndocker-compose exec app node scripts/init-categories.js\n```\n\n### 5. 验证安装\n\n打开浏览器访问 `http://localhost:3000`，您应该能看到 BotSkill 首页。\n\n## Docker 命令\n\n### 查看日志\n\n```bash\n# 查看所有服务日志\ndocker-compose logs -f\n\n# 查看应用日志\ndocker-compose logs -f app\n\n# 查看数据库日志\ndocker-compose logs -f mongo\n```\n\n### 停止服务\n\n```bash\ndocker-compose down\n```\n\n### 停止并删除数据卷\n\n```bash\ndocker-compose down -v\n```\n\n### 重启服务\n\n```bash\ndocker-compose restart\n```\n\n### 更新应用\n\n```bash\n# 拉取最新代码\ngit pull\n\n# 重新构建并启动\ndocker-compose up -d --build\n```\n\n## 使用外部 MongoDB\n\n如果您想使用外部 MongoDB（如 MongoDB Atlas），修改 `docker-compose.yml`：\n\n```yaml\nservices:\n  app:\n    environment:\n      MONGODB_URI: mongodb+srv://username:password@cluster.mongodb.net/botskill\n    # 移除 depends_on: mongo\n  # 移除 mongo 服务定义\n```\n\n## 生产环境建议\n\n1. **使用强密码**：确保 `JWT_SECRET` 足够复杂\n2. **配置 HTTPS**：使用 Nginx 反向代理并配置 SSL 证书\n3. **数据备份**：定期备份 MongoDB 数据卷\n4. **资源限制**：在 `docker-compose.yml` 中配置资源限制\n5. **日志管理**：配置日志轮转和集中日志管理",
    "getting-started-kubernetes": "# Kubernetes 启动\n\n使用 Kubernetes 可以轻松实现 BotSkill 的容器编排和云原生部署。\n\n## 系统要求\n\n- Kubernetes 1.20+\n- kubectl 已配置并连接到集群\n- 至少 2GB 可用内存\n- 至少 10GB 可用存储空间\n\n## 部署步骤\n\n### 1. 准备配置文件\n\n创建 `k8s/namespace.yaml`：\n\n```yaml\napiVersion: v1\nkind: Namespace\nmetadata:\n  name: botskill\n```\n\n创建 `k8s/configmap.yaml`：\n\n```yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: botskill-config\n  namespace: botskill\ndata:\n  NODE_ENV: \"production\"\n  PORT: \"3000\"\n  MONGODB_URI: \"mongodb://mongo:27017/botskill\"\n```\n\n创建 `k8s/secret.yaml`：\n\n```yaml\napiVersion: v1\nkind: Secret\nmetadata:\n  name: botskill-secret\n  namespace: botskill\ntype: Opaque\ndata:\n  JWT_SECRET: <base64-encoded-secret>\n```\n\n> 使用 `echo -n 'your-secret' | base64` 生成 base64 编码的密钥。\n\n### 2. 部署 MongoDB\n\n创建 `k8s/mongodb.yaml`：\n\n```yaml\napiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: mongo\n  namespace: botskill\nspec:\n  serviceName: mongo\n  replicas: 1\n  selector:\n    matchLabels:\n      app: mongo\n  template:\n    metadata:\n      labels:\n        app: mongo\n    spec:\n      containers:\n      - name: mongo\n        image: mongo:7\n        ports:\n        - containerPort: 27017\n        volumeMounts:\n        - name: mongo-data\n          mountPath: /data/db\n  volumeClaimTemplates:\n  - metadata:\n      name: mongo-data\n    spec:\n      accessModes: [ \"ReadWriteOnce\" ]\n      resources:\n        requests:\n          storage: 10Gi\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: mongo\n  namespace: botskill\nspec:\n  selector:\n    app: mongo\n  ports:\n  - port: 27017\n    targetPort: 27017\n```\n\n### 3. 部署 BotSkill 应用\n\n创建 `k8s/deployment.yaml`：\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: botskill\n  namespace: botskill\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: botskill\n  template:\n    metadata:\n      labels:\n        app: botskill\n    spec:\n      containers:\n      - name: app\n        image: botskill/server:latest\n        ports:\n        - containerPort: 3000\n        envFrom:\n        - configMapRef:\n            name: botskill-config\n        - secretRef:\n            name: botskill-secret\n        resources:\n          requests:\n            memory: \"512Mi\"\n            cpu: \"250m\"\n          limits:\n            memory: \"1Gi\"\n            cpu: \"500m\"\n        livenessProbe:\n          httpGet:\n            path: /api/health\n            port: 3000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /api/health\n            port: 3000\n          initialDelaySeconds: 10\n          periodSeconds: 5\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: botskill\n  namespace: botskill\nspec:\n  selector:\n    app: botskill\n  ports:\n  - port: 80\n    targetPort: 3000\n  type: LoadBalancer\n```\n\n### 4. 应用配置\n\n```bash\n# 创建命名空间\nkubectl apply -f k8s/namespace.yaml\n\n# 创建配置和密钥\nkubectl apply -f k8s/configmap.yaml\nkubectl apply -f k8s/secret.yaml\n\n# 部署 MongoDB\nkubectl apply -f k8s/mongodb.yaml\n\n# 等待 MongoDB 就绪\nkubectl wait --for=condition=ready pod -l app=mongo -n botskill --timeout=300s\n\n# 部署应用\nkubectl apply -f k8s/deployment.yaml\n\n# 查看部署状态\nkubectl get pods -n botskill\n```\n\n### 5. 初始化数据\n\n```bash\n# 获取 Pod 名称\nPOD_NAME=$(kubectl get pods -n botskill -l app=botskill -o jsonpath='{.items[0].metadata.name}')\n\n# 创建管理员账户\nkubectl exec -it $POD_NAME -n botskill -- node scripts/create-admin.js\n\n# 初始化权限与角色\nkubectl exec -it $POD_NAME -n botskill -- node scripts/seed-permissions-roles.js\n\n# 初始化分类\nkubectl exec -it $POD_NAME -n botskill -- node scripts/init-categories.js\n```\n\n### 6. 访问应用\n\n```bash\n# 获取服务地址\nkubectl get svc -n botskill\n\n# 如果使用 LoadBalancer，等待外部 IP 分配\n# 如果使用 NodePort，访问 <node-ip>:<node-port>\n```\n\n## 使用 Ingress\n\n创建 `k8s/ingress.yaml`：\n\n```yaml\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: botskill-ingress\n  namespace: botskill\n  annotations:\n    cert-manager.io/cluster-issuer: letsencrypt-prod\nspec:\n  ingressClassName: nginx\n  tls:\n  - hosts:\n    - botskill.example.com\n    secretName: botskill-tls\n  rules:\n  - host: botskill.example.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: botskill\n            port:\n              number: 80\n```\n\n## 扩缩容\n\n```bash\n# 扩展到 3 个副本\nkubectl scale deployment botskill -n botskill --replicas=3\n\n# 使用 HPA（水平 Pod 自动扩缩容）\nkubectl autoscale deployment botskill -n botskill --min=2 --max=10 --cpu-percent=70\n```\n\n## 监控和日志\n\n```bash\n# 查看 Pod 日志\nkubectl logs -f deployment/botskill -n botskill\n\n# 查看资源使用情况\nkubectl top pods -n botskill\n```\n\n## 备份和恢复\n\n### MongoDB 备份\n\n```bash\n# 备份\nkubectl exec -it mongo-0 -n botskill -- mongodump --out=/data/backup\n\n# 恢复\nkubectl exec -it mongo-0 -n botskill -- mongorestore /data/backup\n```",
    "web-usage": "# Web 端使用\n\n## 技能库\n\n在技能库页面可以：\n\n- **搜索**：按技能名称、描述、标签搜索\n- **筛选**：按分类（AI、数据、Web、DevOps、安全、工具）过滤\n- **切换视图**：网格视图或列表视图\n- **下载**：点击技能卡片或详情页的下载按钮\n\n## 技能详情\n\n点击技能进入详情页，可查看：\n\n- 技能描述、作者、评分、下载量\n- 安装命令（复制即用）\n- 版本选择与 SKILL.md 文档\n- 收藏按钮（需登录）\n\n## 个人资料\n\n登录后进入个人资料，包含：\n\n- **个人资料**：编辑头像、昵称、简介\n- **我的技能**：查看、搜索、管理已发布技能，支持编辑、分页\n- **数据统计**：总下载量、技能数、下载趋势图\n- **我的收藏**：收藏的技能列表，可取消收藏\n\n## 发布技能（Web）\n\n拥有发布者或管理员角色后，在「我的技能」点击「发布技能」：\n\n- **上传文件**：支持 .zip、.tar.gz、.md，需包含 SKILL.md\n- **从 URL 导入**：输入 GitHub 或远程地址，自动解析\n- 解析后可编辑元数据，确认后保存",
    "cli-tool": "# CLI 工具\n\nskm 是 BotSkill 官方命令行工具，用于管理、发布和获取 AI 技能。\n\n## 安装\n\n```bash\nnpm install -g @botskill/cli\n```\n\n或使用 npx：`npx @botskill/cli list`\n\n依赖：Node.js v14+、npm v6+\n\n## 命令概览\n\n| 命令 | 描述 |\n|------|------|\n| `skm init` | 初始化新技能项目（创建 skill.config.json） |\n| `skm login` | 登录 BotSkill 账户 |\n| `skm logout` | 登出当前账户 |\n| `skm config` | 管理 CLI 配置（apiUrl、token 等） |\n| `skm list` | 列出技能，支持分类、搜索过滤 |\n| `skm search [query]` | 按关键词搜索技能 |\n| `skm get [name]` | 下载技能到本地，支持 name@version 指定版本 |\n| `skm info [name]` | 查看技能详情（不下载） |\n| `skm push` / `skm publish` | 发布技能到 BotSkill（需登录，发布者或管理员） |\n| `skm help` | 显示帮助信息 |\n\n## 常用示例\n\n```bash\n# 搜索技能\nskm search pdf\nskm search translator --category ai\n\n# 列出技能\nskm list --category ai --limit 10\nskm list --mine   # 我的技能（需登录）\n\n# 下载技能\nskm get pdf-processing\nskm get pdf-processing@1.0.0 -o ./my-skills\n\n# 查看技能详情\nskm info pdf-processing\n```\n\n## 配置\n\n安装后会在用户主目录创建 `~/.skm/`，使用 `skm config` 管理：\n\n```bash\nskm config --list              # 列出所有配置\nskm config --get apiUrl      # 获取 API 地址\nskm config --set apiUrl=...  # 设置 API 地址\n```\n\n环境变量 `BOTSKILL_API_URL` 可覆盖 API 地址。",
    "publish-skill": "# 发布技能\n\n## 发布方式\n\nBotSkill 支持两种发布方式：\n\n- **Web 端**：登录后进入个人资料 → 我的技能 → 发布技能，可上传文件或从 URL 导入\n- **CLI**：使用 `skm push` 或 `skm publish` 从本地发布\n\n## 技能格式（SKILL.md）\n\n技能使用 SKILL.md 文件定义元数据，采用 YAML frontmatter + Markdown 文档：\n\n```yaml\n---\nname: my-skill\ndescription: 技能简短描述\ncategory: ai\ntags: [nlp, translation]\nlicense: MIT\nmetadata:\n  version: 1.0.0\n  author: your-username\n---\n\n# 技能文档\n\n详细使用说明、示例代码等...\n```\n\n支持格式：`.zip`、`.tar.gz` 压缩包（需包含 SKILL.md），或单独的 `SKILL.md` 文件。\n\n## CLI 发布流程\n\n1. 初始化项目：`skm init --name my-skill --description \"描述\"`\n2. 编辑 `skill.config.json` 或创建 `SKILL.md`\n3. 登录：`skm login`\n4. 发布：`skm push` 或 `skm publish`\n\n## 项目结构示例\n\n```\nmy-skill/\n├── SKILL.md           # 技能元数据与文档（必需）\n├── skill.config.json  # CLI 配置（skm init 生成）\n├── index.js           # 主入口（可选）\n├── package.json       # 依赖（可选）\n└── examples/         # 示例（可选）\n```\n\n## 分类与版本\n\n- **分类**：ai, data, web, devops, security, tools\n- **版本**：使用语义化版本 X.Y.Z\n- 发布者需拥有 **publisher** 或 **admin** 角色",
    "api-reference": "# API 参考\n\nBotSkill API 为 RESTful 接口，基础路径为 `/api`。除公开接口外，需在请求头携带 `Authorization: Bearer <token>`。\n\n## 认证\n\n| 方法 | 路径 | 说明 |\n|------|------|------|\n| POST | `/auth/register` | 注册新用户 |\n| POST | `/auth/login` | 登录（返回 accessToken、refreshToken） |\n| POST | `/auth/logout` | 登出（需 refreshToken） |\n| POST | `/auth/refresh` | 刷新 Token（需 refreshToken） |\n| GET | `/auth/me` | 获取当前用户（需认证） |\n\n## 技能（公开）\n\n| 方法 | 路径 | 说明 |\n|------|------|------|\n| GET | `/skills` | 获取已发布技能列表（分页） |\n| GET | `/skills/search` | 搜索技能 |\n| GET | `/skills/popular` | 热门技能 |\n| GET | `/skills/latest` | 最新技能 |\n| GET | `/skills/by-name/:name` | 按名称获取技能 |\n| GET | `/skills/:id` | 获取技能详情 |\n| GET | `/skills/:id/versions/:version` | 获取指定版本详情 |\n| GET | `/skills/:id/download` | 获取下载链接 |\n\n搜索参数：`q` 关键词、`category` 分类、`tags` 标签、`page`、`limit`\n\n## 用户（需认证）\n\n| 方法 | 路径 | 说明 |\n|------|------|------|\n| GET | `/users/:id` | 获取用户信息 |\n| PUT | `/users/:id` | 更新用户（fullName、bio、avatar） |\n| GET | `/users/stats` | 获取个人数据统计 |\n| GET | `/users/me/favorites` | 我的收藏 |\n| POST | `/users/me/favorites/:skillId` | 添加收藏 |\n| DELETE | `/users/me/favorites/:skillId` | 取消收藏 |\n\n## 发布者（需 publisher/admin）\n\n| 方法 | 路径 | 说明 |\n|------|------|------|\n| GET | `/skills/my` | 我的技能 |\n| POST | `/skills/upload` | 上传技能包（zip/tar.gz/md） |\n| POST | `/skills/upload/parse` | 解析上传文件（预览元数据） |\n| POST | `/skills/upload/parse-url` | 从 URL 解析技能 |\n| POST | `/skills/create-from-form` | 创建技能（表单） |\n| PUT | `/skills/update-from-form/:id` | 更新技能 |\n| POST | `/skills` | 创建技能（JSON） |\n| PUT | `/skills/:id` | 更新技能 |\n| DELETE | `/skills/:id` | 删除技能 |\n\n## 管理员（需 admin）\n\n| 方法 | 路径 | 说明 |\n|------|------|------|\n| GET | `/admin/dashboard` | 仪表板统计 |\n| GET | `/admin/users` | 用户列表 |\n| GET | `/admin/users-with-roles` | 用户及角色 |\n| PUT | `/admin/users/:id` | 更新用户 |\n| PUT | `/admin/users/:id/role` | 分配角色 |\n| PUT | `/admin/users/:id/status` | 启用/禁用用户 |\n| POST | `/admin/users/:id/reset-password` | 重置密码 |\n| DELETE | `/admin/users/:id` | 删除用户 |\n| GET | `/admin/skills` | 所有技能（含待审核） |\n| PUT | `/admin/skills/:id/status` | 更新技能状态 |\n| GET | `/admin/roles` | 角色列表 |\n| GET | `/admin/permissions` | 权限列表 |\n| GET | `/admin/settings` | 系统设置 |\n| PUT | `/admin/settings` | 更新系统设置 |",
    "best-practices": "# 最佳实践\n\n## 技能开发指南\n\n- **清晰的接口设计**：提供简单、一致的 API 接口\n- **充分的错误处理**：对可能的错误情况进行适当的处理\n- **良好的文档**：提供详细的使用说明和示例代码\n- **单元测试**：包含充分的测试用例确保功能正确性\n- **向后兼容**：在更新时保持向后兼容性\n- **性能优化**：优化性能，减少资源消耗\n\n## 安全性考虑\n\n- 对用户输入进行适当的验证和清理\n- 避免执行任意代码或脚本\n- 使用安全的数据传输协议\n- 保护敏感信息不被泄露\n\n## 发布建议\n\n- 使用语义化版本号 (SemVer)，如 1.0.0\n- 在 SKILL.md 中提供清晰的使用说明和示例\n- 选择合适的分类和标签，便于用户发现\n- 定期更新维护，积极响应用户反馈\n\n## SKILL.md 规范\n\n- `name`：小写字母、数字、连字符，1–64 字符\n- `description`：必填，最多 1024 字符\n- `category`：ai / data / web / devops / security / tools\n- `metadata.version`：X.Y.Z 格式",
    "deployment": "# 部署指南\n\n## 环境要求\n\n- Node.js 18+\n- MongoDB 4.4+（本地或 Atlas）\n- 内存建议 1GB+\n- Docker 20+（可选，用于容器化部署）\n\n## 本地开发\n\n```bash\n# 克隆并安装\ngit clone https://github.com/botskill-ai/botskill && cd botskill\nnpm run install:all\n\n# 配置 backend/.env\nNODE_ENV=development\nPORT=3001\nMONGODB_URI=mongodb://localhost:27017/botskill\nJWT_SECRET=your-secret-key-at-least-32-chars\n\n# 启动（前后端并行）\nnpm run dev\n```\n\n前端默认 `http://localhost:3000`，后端 `http://localhost:3001`\n\n---\n\n## Docker 部署（推荐）\n\n项目根目录提供 `Dockerfile`，可将前后端一体构建为单个镜像。\n\n### 构建镜像\n\n```bash\ncd skills-project\ndocker build -t botskill:latest .\n```\n\n### 运行容器\n\n```bash\ndocker run -d \\\n  --name botskill \\\n  -p 3000:3000 \\\n  -e MONGODB_URI=mongodb://host.docker.internal:27017/botskill \\\n  -e JWT_SECRET=your-secret-key-at-least-32-chars \\\n  botskill:latest\n```\n\n- 端口 `3000`：应用入口（前端 + API 同源）\n- `MONGODB_URI`：宿主机 MongoDB 可用 `host.docker.internal`（Mac/Windows）或宿主机 IP\n- 生产环境建议使用外部 MongoDB（如 Atlas）\n\n### Docker Compose 示例\n\n```yaml\n# docker-compose.yml\nversion: '3.8'\nservices:\n  app:\n    build: .\n    ports:\n      - \"3000:3000\"\n    environment:\n      NODE_ENV: production\n      MONGODB_URI: mongodb://mongo:27017/botskill\n      JWT_SECRET: ${JWT_SECRET}\n    depends_on:\n      - mongo\n  mongo:\n    image: mongo:7\n    ports:\n      - \"27017:27017\"\n    volumes:\n      - mongo_data:/data/db\nvolumes:\n  mongo_data:\n```\n\n```bash\nJWT_SECRET=your-secret docker-compose up -d\n```\n\n### 初始化数据（Docker 内）\n\n```bash\ndocker exec -it botskill node scripts/create-admin.js\ndocker exec -it botskill node scripts/seed-permissions-roles.js\n```\n\n---\n\n## 传统部署（PM2 + Nginx）\n\n### 1. 构建前端\n\n```bash\nnpm run build\n```\n\n产物在 `client/dist`，可部署到 Nginx、Vercel 等静态托管。\n\n### 2. 后端（PM2）\n\n```bash\ncd backend\nnpm install --production\n# 配置 .env (NODE_ENV=production, MONGODB_URI, JWT_SECRET)\npm2 start server.js --name skills-backend\npm2 startup && pm2 save\n```\n\n### 3. Nginx 反向代理\n\n```nginx\n# API 代理\nlocation /api {\n  proxy_pass http://127.0.0.1:3001;\n  proxy_http_version 1.1;\n  proxy_set_header Host $host;\n  proxy_set_header X-Real-IP $remote_addr;\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n  proxy_set_header X-Forwarded-Proto $scheme;\n}\n\n# 前端 SPA\nlocation / {\n  root /path/to/client/dist;\n  try_files $uri $uri/ /index.html;\n}\n```\n\n### 4. HTTPS 配置\n\n使用 Let's Encrypt 免费证书：\n\n```bash\nsudo apt install certbot python3-certbot-nginx\nsudo certbot --nginx -d botskill.ai\n```\n\n### 5. 初始化数据\n\n```bash\ncd backend\nnpm run create-admin    # 创建管理员账户\nnpm run seed-permissions # 初始化权限与角色\n```\n\n---\n\n## 环境变量\n\n| 变量 | 说明 |\n|------|------|\n| NODE_ENV | development / production |\n| PORT | 应用端口，默认 3000 |\n| MONGODB_URI | MongoDB 连接字符串 |\n| JWT_SECRET | JWT 密钥，务必使用强随机串（`openssl rand -base64 32`） |\n| FRONTEND_URL | 前端地址（OAuth 回调用，Docker 部署时通常同源可省略） |\n| GOOGLE_CLIENT_ID / GOOGLE_CLIENT_SECRET | Google OAuth（可选） |\n| GITHUB_CLIENT_ID / GITHUB_CLIENT_SECRET | GitHub OAuth（可选） |",
    "faq": "# 常见问题\n\n## 安装与运行\n\n### 端口被占用怎么办？\n\n修改 `backend/.env` 中的 `PORT`，或关闭占用该端口的进程。\n\n### MongoDB 连接失败？\n\n检查 `MONGODB_URI` 是否正确，MongoDB 服务是否运行，防火墙是否放行。\n\n### 依赖安装失败？\n\n尝试 `npm cache clean --force`，删除 `node_modules` 后重新 `npm install`。\n\n## 部署\n\n### 502 Bad Gateway？\n\n确认后端进程（PM2）在运行，Nginx 的 proxy_pass 端口与后端一致。\n\n### 如何配置 HTTPS？\n\n使用 Let's Encrypt：`certbot --nginx -d botskill.ai`\n\n## 使用\n\n### 如何成为发布者？\n\n联系管理员将您的角色升级为 publisher，或使用已有 admin 账户在后台分配角色。\n\n### 技能审核流程？\n\n发布者提交后状态为「待审核」，管理员在后台可批准（published）或拒绝（archived）。",
    "appendix": "# 附录\n\n## 技术栈\n\n| 前端 | 后端 |\n|------|------|\n| React 18、TypeScript | Node.js、Express |\n| Vite、Tailwind CSS | MongoDB、Mongoose |\n| React Router、i18next | JWT、Bcrypt |\n\n## 项目结构\n\n```\nskills-project/\n├── client/          # React 前端\n│   ├── src/\n│   │   ├── components/\n│   │   ├── pages/\n│   │   ├── contexts/\n│   │   └── locales/\n│   └── package.json\n├── backend/         # Express 后端\n│   ├── controllers/\n│   ├── models/\n│   ├── routes/\n│   ├── middleware/\n│   └── server.js\n└── skm-cli/         # CLI 工具\n```\n\n## 贡献指南\n\n1. Fork 项目\n2. 创建功能分支 `git checkout -b feature/xxx`\n3. 提交更改 `git commit -m 'Add xxx'`\n4. 推送分支并创建 Pull Request\n\n许可证：MIT"
  }
}
